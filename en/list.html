<!DOCTYPE html>
<html>

<head>
	<meta charset='UTF-8'>
	<title>ubike site list</title>
	<script>
		function httpGet(url) {
			var xmlHttp = new XMLHttpRequest({
				mozSystem: true
			});
			xmlHttp.open("GET", url, false);
			xmlHttp.send(null);
			return xmlHttp.responseText;
		}

		function init() {
			var url = 'http://ubike.net46.net/ubikeen.php';
			var response = httpGet(url);
			response = response.substring(0, response.indexOf('<')-1);
			var obj = JSON.parse(response);
			var content = '<table id=tbl border=1><tr><th>#</th><th>Station</th><th>Location</th>' + '<th> (Lat, Lng) </th><th>Bike #</th><th>Park #</th></tr>';
			for (var i in obj) {
				var sna, ar;
				sna = obj[i].sna;
				ar = obj[i].sarea + ' ' + obj[i].ar;
				content = content + "<tr><td>" + i + "</td><td>"
					+ sna + "</td><td>" + ar + "</td><td> ("
					+ obj[i].lat + ", " + obj[i].lng + ") </td><td>"
					+ obj[i].sbi + "</td><td>" + (obj[i].tot - obj[i].sbi) + "</td></tr>\n";
			}
			content = content + "</table>";
			document.getElementById("ubike").innerHTML = content;
		}
	</script>
	<style>
		tr:nth-child(even) {
			background: #CCC
		}
		tr:nth-child(odd) {
			background: #FFF
		}
	</style>
</head>

<body onload=init()>
	<p id='ubike'></p>
</body>

</html>
